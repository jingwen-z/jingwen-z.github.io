<!DOCTYPE html><html lang="en">
  <head><!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-85831520-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-85831520-1');
		
	</script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><title>Analysis of internauts' behavior - Jingwen Zheng</title>

<meta name="description" content="Since the internship will be finished in a few days, I’m seeking employment andreceived several invitations of interview, one of these company is FABERNOVELD...">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Analysis of internauts’ behavior | Jingwen Zheng</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Analysis of internauts’ behavior" />
<meta name="author" content="Jingwen Zheng" />
<meta property="og:locale" content="en" />
<meta name="description" content="Since the internship will be finished in a few days, I’m seeking employment and received several invitations of interview, one of these company is FABERNOVEL DATA &amp; MEDIA. After the first telephone interview, there was a data-analysis test, which is really interesting. Thus, I would like to share with you. Data There are 288,425 observations and 12 variables in the dataset, which are extracted from the the web FABERNOVEL and describe various information of web accessing. The following table gives a description of all variables. Variables Description date The date of contact between user and FABERNOVEL hour The hour of contact between user and FABERNOVEL website userID A unique identifier represents a user (may be misinformed) medium A categorization already carried out of the source of traffic that led the user to the site deviceCategory The contact takes place via a desktop computer, a mobile phone or a tablet regionId A code indicates the region where user is located during the contact sessions The numbre of contacts made goalsCompletions The number of actions considered as a goal on the site realized by the internauts pageviews The number of page views on the site timeOnPage The time spent on the site (the sum of the time spent on each page during a contact) transactions The number of purchases on the site made by the user transactionRevenue The turnover realized by the surfer Data preprocessing Moreover, we need to preprocess data before analysing. Check missing values According to View(), we can find that among the column “medium” and “regionId”, there are missing values expressed as “(none)” or “(not set)”. In order to remove them, “(none)” and “(not set)” are replaced by NA; then, counting the amount of missing values with sum(is.na()), in this case, there are 24,791 missing values in the dataset; finally, all missing values are removed. Check outliers Thanks to the blog on site web R-bloggers, which used the Tukey’s method to identify the outliers ranged below and above the 1.5*IQR(interquartile). In the blog, the author also shares the following R script that can produce boxplots and histograms with and without outliers, the proportion of outliers as well. Here, I will show the result of variable pageviews’ outlierCheck as an example. &gt; outlierCheck(dataset, pageviews) Outliers identified: 40767 Proportion (%) of outliers: 18.3 Mean of the outliers: 22.49 Mean without removing outliers: 5.19 Mean if we removing outliers: 2.03 Data visualization Another thing should not be forgotten before analysing is data visualisation. According to the following graphs, we could see information clearly and efficiently. By the histogram above, we can observe that the sum of time spent on one page is mostly shorter than 1000 units; and among 3 device categories, desktops are most used, while the users of tablet are the least. Now, let’s look at this graph, it shows the amount of page views varies with hour. At 7h, the amount of page views increases sharply, that might because people wake up and surf on the net for make themselves to be awake; then it becomes more gradual during the day, and reaches the peak at 21h, this reflects that internauts prefer to surf the internet after dinner; after 21h, the amount of page views decrease until tomorrow morning, as we expect, people go to sleep at night. These two graphs describe Page views’ tendency in terms of Date, with respect to different devices. The first graph shows the overlapped page views of 3 devices, which does a favour for comparing directly the page views among all devices; so we can observe that page views’ amount from desktops is the most among three devices, and during the period Sep. 19th - Oct. 19th, webpages are more viewed from 6th October and reach the peak on 7th October, then page views decrease slowly until 18th October and increase suddenly on 19th October. The three graphs which are below the previous one display the tendency of each device separately. Obviously, the results are similar as the first graph, but they contribute to the analysis of Date-Page views relation for each device. Principal Components Analysis In order to summarize the dataset while trying at the same time to keep the maximal information contained among the variables. I firstly used the Principal Components Analysis (PCA) technique. Component Sd Cumulative Comp.1 1.75685 0.44093 Comp.2 1.09184 0.61123 Comp.3 1.00515 0.75556 Comp.4 0.98331 0.89370 Comp.5 0.614753 0.947681 Comp.6 0.492406 0.982318 Comp.7 0.351811 1.000000 According to the table above, notice that the explained variance labelled cumulative reaches 80% and increases very little as we add more principal components, so we keep 4 principal components. From this graph, we could also get the number of principal components that will be interpreted. The shape of the curve changes after the 4th component. Thus, the same conclusion, we will keep 4 principal components. By the following, I’ll take the first and the second principal component as an example to interpret the result of PCA. From this scatterplot, we got the Component 1 is correlated positively with timeOnPage, pageviews, goalsCompletions, transactons and transactionRevenue. We also observed that the proportion of explained variance of the first component is 44.09%. Component measures the elements which are most relative to transaction. Component 2 is correlated positively with sessions, hours, timeOnPage, pageviews and goalsCompletions. The proportion of explained variance of the second component is 17.03%. The second component measures the users’ performance of site visiting. Clustering (k-means) The second method that I used is Clustering(CL). This technique will enable us to check different groups of observations. Members in each group are similar and close to each other. In order to apply Clustering k-means method, we can use the function kmeans(). userKMeans &lt;- kmeans(dataCL, centers = 4) &gt; userKMeans K-means clustering with 4 clusters of sizes 3589, 31603, 12588, 216232 Within cluster sum of squares by cluster: [1] 1240837547 1150301678 1142761041 953329798 (between_SS / total_SS = 91.7 %) Available components: [1] &quot;cluster&quot; &quot;centers&quot; &quot;totss&quot; &quot;withinss&quot; [5] &quot;tot.withinss&quot; &quot;betweenss&quot; &quot;size&quot; &quot;iter&quot; [9] &quot;ifault&quot; The following graph describes Time on Page’s tendency in terms of Page Views, with respect to different clusters. In this graph, four clusters are presented clearly: the internauts in cluster 1 spend more than 2000 units of time on the webpage; the internauts who spend more than 250 time units but less than 1000 time units are in the second cluster; while in the third cluster, the time that people spend on the webpage is between 1000 and 2000 time units; finally, for the people who are in cluster 4, browsing webpage only takes less than 250 time units. In this case, we can make different strategies of internet advertising for different clusters. Here is what I want to share with you, really enjoyable, right? If you are interested in the R script, please check it on my Github, all propositions are welcome! Reference freephotocc, “notebook laptop macbook conceptual”, pixabay.com. [Online]. Available: https://pixabay.com/photos/notebook-laptop-macbook-conceptual-1280538/" />
<meta property="og:description" content="Since the internship will be finished in a few days, I’m seeking employment and received several invitations of interview, one of these company is FABERNOVEL DATA &amp; MEDIA. After the first telephone interview, there was a data-analysis test, which is really interesting. Thus, I would like to share with you. Data There are 288,425 observations and 12 variables in the dataset, which are extracted from the the web FABERNOVEL and describe various information of web accessing. The following table gives a description of all variables. Variables Description date The date of contact between user and FABERNOVEL hour The hour of contact between user and FABERNOVEL website userID A unique identifier represents a user (may be misinformed) medium A categorization already carried out of the source of traffic that led the user to the site deviceCategory The contact takes place via a desktop computer, a mobile phone or a tablet regionId A code indicates the region where user is located during the contact sessions The numbre of contacts made goalsCompletions The number of actions considered as a goal on the site realized by the internauts pageviews The number of page views on the site timeOnPage The time spent on the site (the sum of the time spent on each page during a contact) transactions The number of purchases on the site made by the user transactionRevenue The turnover realized by the surfer Data preprocessing Moreover, we need to preprocess data before analysing. Check missing values According to View(), we can find that among the column “medium” and “regionId”, there are missing values expressed as “(none)” or “(not set)”. In order to remove them, “(none)” and “(not set)” are replaced by NA; then, counting the amount of missing values with sum(is.na()), in this case, there are 24,791 missing values in the dataset; finally, all missing values are removed. Check outliers Thanks to the blog on site web R-bloggers, which used the Tukey’s method to identify the outliers ranged below and above the 1.5*IQR(interquartile). In the blog, the author also shares the following R script that can produce boxplots and histograms with and without outliers, the proportion of outliers as well. Here, I will show the result of variable pageviews’ outlierCheck as an example. &gt; outlierCheck(dataset, pageviews) Outliers identified: 40767 Proportion (%) of outliers: 18.3 Mean of the outliers: 22.49 Mean without removing outliers: 5.19 Mean if we removing outliers: 2.03 Data visualization Another thing should not be forgotten before analysing is data visualisation. According to the following graphs, we could see information clearly and efficiently. By the histogram above, we can observe that the sum of time spent on one page is mostly shorter than 1000 units; and among 3 device categories, desktops are most used, while the users of tablet are the least. Now, let’s look at this graph, it shows the amount of page views varies with hour. At 7h, the amount of page views increases sharply, that might because people wake up and surf on the net for make themselves to be awake; then it becomes more gradual during the day, and reaches the peak at 21h, this reflects that internauts prefer to surf the internet after dinner; after 21h, the amount of page views decrease until tomorrow morning, as we expect, people go to sleep at night. These two graphs describe Page views’ tendency in terms of Date, with respect to different devices. The first graph shows the overlapped page views of 3 devices, which does a favour for comparing directly the page views among all devices; so we can observe that page views’ amount from desktops is the most among three devices, and during the period Sep. 19th - Oct. 19th, webpages are more viewed from 6th October and reach the peak on 7th October, then page views decrease slowly until 18th October and increase suddenly on 19th October. The three graphs which are below the previous one display the tendency of each device separately. Obviously, the results are similar as the first graph, but they contribute to the analysis of Date-Page views relation for each device. Principal Components Analysis In order to summarize the dataset while trying at the same time to keep the maximal information contained among the variables. I firstly used the Principal Components Analysis (PCA) technique. Component Sd Cumulative Comp.1 1.75685 0.44093 Comp.2 1.09184 0.61123 Comp.3 1.00515 0.75556 Comp.4 0.98331 0.89370 Comp.5 0.614753 0.947681 Comp.6 0.492406 0.982318 Comp.7 0.351811 1.000000 According to the table above, notice that the explained variance labelled cumulative reaches 80% and increases very little as we add more principal components, so we keep 4 principal components. From this graph, we could also get the number of principal components that will be interpreted. The shape of the curve changes after the 4th component. Thus, the same conclusion, we will keep 4 principal components. By the following, I’ll take the first and the second principal component as an example to interpret the result of PCA. From this scatterplot, we got the Component 1 is correlated positively with timeOnPage, pageviews, goalsCompletions, transactons and transactionRevenue. We also observed that the proportion of explained variance of the first component is 44.09%. Component measures the elements which are most relative to transaction. Component 2 is correlated positively with sessions, hours, timeOnPage, pageviews and goalsCompletions. The proportion of explained variance of the second component is 17.03%. The second component measures the users’ performance of site visiting. Clustering (k-means) The second method that I used is Clustering(CL). This technique will enable us to check different groups of observations. Members in each group are similar and close to each other. In order to apply Clustering k-means method, we can use the function kmeans(). userKMeans &lt;- kmeans(dataCL, centers = 4) &gt; userKMeans K-means clustering with 4 clusters of sizes 3589, 31603, 12588, 216232 Within cluster sum of squares by cluster: [1] 1240837547 1150301678 1142761041 953329798 (between_SS / total_SS = 91.7 %) Available components: [1] &quot;cluster&quot; &quot;centers&quot; &quot;totss&quot; &quot;withinss&quot; [5] &quot;tot.withinss&quot; &quot;betweenss&quot; &quot;size&quot; &quot;iter&quot; [9] &quot;ifault&quot; The following graph describes Time on Page’s tendency in terms of Page Views, with respect to different clusters. In this graph, four clusters are presented clearly: the internauts in cluster 1 spend more than 2000 units of time on the webpage; the internauts who spend more than 250 time units but less than 1000 time units are in the second cluster; while in the third cluster, the time that people spend on the webpage is between 1000 and 2000 time units; finally, for the people who are in cluster 4, browsing webpage only takes less than 250 time units. In this case, we can make different strategies of internet advertising for different clusters. Here is what I want to share with you, really enjoyable, right? If you are interested in the R script, please check it on my Github, all propositions are welcome! Reference freephotocc, “notebook laptop macbook conceptual”, pixabay.com. [Online]. Available: https://pixabay.com/photos/notebook-laptop-macbook-conceptual-1280538/" />
<link rel="canonical" href="https://jingwen-z.github.io//users-clustering/" />
<meta property="og:url" content="https://jingwen-z.github.io//users-clustering/" />
<meta property="og:site_name" content="Jingwen Zheng" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-11-18T22:32:43+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Analysis of internauts’ behavior" />
<meta name="twitter:site" content="@Jingwen_QI" />
<meta name="twitter:creator" content="@Jingwen Zheng" />
<script type="application/ld+json">
{"description":"Since the internship will be finished in a few days, I’m seeking employment and received several invitations of interview, one of these company is FABERNOVEL DATA &amp; MEDIA. After the first telephone interview, there was a data-analysis test, which is really interesting. Thus, I would like to share with you. Data There are 288,425 observations and 12 variables in the dataset, which are extracted from the the web FABERNOVEL and describe various information of web accessing. The following table gives a description of all variables. Variables Description date The date of contact between user and FABERNOVEL hour The hour of contact between user and FABERNOVEL website userID A unique identifier represents a user (may be misinformed) medium A categorization already carried out of the source of traffic that led the user to the site deviceCategory The contact takes place via a desktop computer, a mobile phone or a tablet regionId A code indicates the region where user is located during the contact sessions The numbre of contacts made goalsCompletions The number of actions considered as a goal on the site realized by the internauts pageviews The number of page views on the site timeOnPage The time spent on the site (the sum of the time spent on each page during a contact) transactions The number of purchases on the site made by the user transactionRevenue The turnover realized by the surfer Data preprocessing Moreover, we need to preprocess data before analysing. Check missing values According to View(), we can find that among the column “medium” and “regionId”, there are missing values expressed as “(none)” or “(not set)”. In order to remove them, “(none)” and “(not set)” are replaced by NA; then, counting the amount of missing values with sum(is.na()), in this case, there are 24,791 missing values in the dataset; finally, all missing values are removed. Check outliers Thanks to the blog on site web R-bloggers, which used the Tukey’s method to identify the outliers ranged below and above the 1.5*IQR(interquartile). In the blog, the author also shares the following R script that can produce boxplots and histograms with and without outliers, the proportion of outliers as well. Here, I will show the result of variable pageviews’ outlierCheck as an example. &gt; outlierCheck(dataset, pageviews) Outliers identified: 40767 Proportion (%) of outliers: 18.3 Mean of the outliers: 22.49 Mean without removing outliers: 5.19 Mean if we removing outliers: 2.03 Data visualization Another thing should not be forgotten before analysing is data visualisation. According to the following graphs, we could see information clearly and efficiently. By the histogram above, we can observe that the sum of time spent on one page is mostly shorter than 1000 units; and among 3 device categories, desktops are most used, while the users of tablet are the least. Now, let’s look at this graph, it shows the amount of page views varies with hour. At 7h, the amount of page views increases sharply, that might because people wake up and surf on the net for make themselves to be awake; then it becomes more gradual during the day, and reaches the peak at 21h, this reflects that internauts prefer to surf the internet after dinner; after 21h, the amount of page views decrease until tomorrow morning, as we expect, people go to sleep at night. These two graphs describe Page views’ tendency in terms of Date, with respect to different devices. The first graph shows the overlapped page views of 3 devices, which does a favour for comparing directly the page views among all devices; so we can observe that page views’ amount from desktops is the most among three devices, and during the period Sep. 19th - Oct. 19th, webpages are more viewed from 6th October and reach the peak on 7th October, then page views decrease slowly until 18th October and increase suddenly on 19th October. The three graphs which are below the previous one display the tendency of each device separately. Obviously, the results are similar as the first graph, but they contribute to the analysis of Date-Page views relation for each device. Principal Components Analysis In order to summarize the dataset while trying at the same time to keep the maximal information contained among the variables. I firstly used the Principal Components Analysis (PCA) technique. Component Sd Cumulative Comp.1 1.75685 0.44093 Comp.2 1.09184 0.61123 Comp.3 1.00515 0.75556 Comp.4 0.98331 0.89370 Comp.5 0.614753 0.947681 Comp.6 0.492406 0.982318 Comp.7 0.351811 1.000000 According to the table above, notice that the explained variance labelled cumulative reaches 80% and increases very little as we add more principal components, so we keep 4 principal components. From this graph, we could also get the number of principal components that will be interpreted. The shape of the curve changes after the 4th component. Thus, the same conclusion, we will keep 4 principal components. By the following, I’ll take the first and the second principal component as an example to interpret the result of PCA. From this scatterplot, we got the Component 1 is correlated positively with timeOnPage, pageviews, goalsCompletions, transactons and transactionRevenue. We also observed that the proportion of explained variance of the first component is 44.09%. Component measures the elements which are most relative to transaction. Component 2 is correlated positively with sessions, hours, timeOnPage, pageviews and goalsCompletions. The proportion of explained variance of the second component is 17.03%. The second component measures the users’ performance of site visiting. Clustering (k-means) The second method that I used is Clustering(CL). This technique will enable us to check different groups of observations. Members in each group are similar and close to each other. In order to apply Clustering k-means method, we can use the function kmeans(). userKMeans &lt;- kmeans(dataCL, centers = 4) &gt; userKMeans K-means clustering with 4 clusters of sizes 3589, 31603, 12588, 216232 Within cluster sum of squares by cluster: [1] 1240837547 1150301678 1142761041 953329798 (between_SS / total_SS = 91.7 %) Available components: [1] &quot;cluster&quot; &quot;centers&quot; &quot;totss&quot; &quot;withinss&quot; [5] &quot;tot.withinss&quot; &quot;betweenss&quot; &quot;size&quot; &quot;iter&quot; [9] &quot;ifault&quot; The following graph describes Time on Page’s tendency in terms of Page Views, with respect to different clusters. In this graph, four clusters are presented clearly: the internauts in cluster 1 spend more than 2000 units of time on the webpage; the internauts who spend more than 250 time units but less than 1000 time units are in the second cluster; while in the third cluster, the time that people spend on the webpage is between 1000 and 2000 time units; finally, for the people who are in cluster 4, browsing webpage only takes less than 250 time units. In this case, we can make different strategies of internet advertising for different clusters. Here is what I want to share with you, really enjoyable, right? If you are interested in the R script, please check it on my Github, all propositions are welcome! Reference freephotocc, “notebook laptop macbook conceptual”, pixabay.com. [Online]. Available: https://pixabay.com/photos/notebook-laptop-macbook-conceptual-1280538/","mainEntityOfPage":{"@type":"WebPage","@id":"https://jingwen-z.github.io//users-clustering/"},"@type":"BlogPosting","url":"https://jingwen-z.github.io//users-clustering/","headline":"Analysis of internauts’ behavior","dateModified":"2016-11-18T22:32:43+01:00","datePublished":"2016-11-18T22:32:43+01:00","author":{"@type":"Person","name":"Jingwen Zheng"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


<!-- Extra Open Graph :: Start -->

<!-- Extra Open Graph :: End -->

<link rel="canonical" href="https://jingwen-z.github.io//users-clustering/"><link rel="alternate" type="application/rss+xml" title="Jingwen Zheng" href="/feed.xml"><!-- start favicons snippet, use https://realfavicongenerator.net/ --><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"><link rel="manifest" href="/assets/site.webmanifest"><link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#fc4d50"><link rel="shortcut icon" href="/assets/favicon.ico">

<meta name="msapplication-TileColor" content="#ffc40d"><meta name="msapplication-config" content="/assets/browserconfig.xml">

<meta name="theme-color" content="#ffffff">
<!-- end favicons snippet --><link rel="stylesheet" href="/assets/css/main.css"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.1/css/all.css" ><!-- start custom head snippets -->

<!-- end custom head snippets -->
<script>(function() {
  window.isArray = function(val) {
    return Object.prototype.toString.call(val) === '[object Array]';
  };
  window.isString = function(val) {
    return typeof val === 'string';
  };

  window.hasEvent = function(event) {
    return 'on'.concat(event) in window.document;
  };

  window.isOverallScroller = function(node) {
    return node === document.documentElement || node === document.body || node === window;
  };

  window.isFormElement = function(node) {
    var tagName = node.tagName;
    return tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';
  };

  window.pageLoad = (function () {
    var loaded = false, cbs = [];
    window.addEventListener('load', function () {
      var i;
      loaded = true;
      if (cbs.length > 0) {
        for (i = 0; i < cbs.length; i++) {
          cbs[i]();
        }
      }
    });
    return {
      then: function(cb) {
        cb && (loaded ? cb() : (cbs.push(cb)));
      }
    };
  })();
})();
(function() {
  window.throttle = function(func, wait) {
    var args, result, thisArg, timeoutId, lastCalled = 0;

    function trailingCall() {
      lastCalled = new Date;
      timeoutId = null;
      result = func.apply(thisArg, args);
    }
    return function() {
      var now = new Date,
        remaining = wait - (now - lastCalled);

      args = arguments;
      thisArg = this;

      if (remaining <= 0) {
        clearTimeout(timeoutId);
        timeoutId = null;
        lastCalled = now;
        result = func.apply(thisArg, args);
      } else if (!timeoutId) {
        timeoutId = setTimeout(trailingCall, remaining);
      }
      return result;
    };
  };
})();
(function() {
  var Set = (function() {
    var add = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (data[i] === item) {
          return;
        }
      }
      this.size ++;
      data.push(item);
      return data;
    };

    var Set = function(data) {
      this.size = 0;
      this._data = [];
      var i;
      if (data.length > 0) {
        for (i = 0; i < data.length; i++) {
          add.call(this, data[i]);
        }
      }
    };
    Set.prototype.add = add;
    Set.prototype.get = function(index) { return this._data[index]; };
    Set.prototype.has = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (this.get(i) === item) {
          return true;
        }
      }
      return false;
    };
    Set.prototype.is = function(map) {
      if (map._data.length !== this._data.length) { return false; }
      var i, j, flag, tData = this._data, mData = map._data;
      for (i = 0; i < tData.length; i++) {
        for (flag = false, j = 0; j < mData.length; j++) {
          if (tData[i] === mData[j]) {
            flag = true;
            break;
          }
        }
        if (!flag) { return false; }
      }
      return true;
    };
    Set.prototype.values = function() {
      return this._data;
    };
    return Set;
  })();

  window.Lazyload = (function(doc) {
    var queue = {js: [], css: []}, sources = {js: {}, css: {}}, context = this;
    var createNode = function(name, attrs) {
      var node = doc.createElement(name), attr;
      for (attr in attrs) {
        if (attrs.hasOwnProperty(attr)) {
          node.setAttribute(attr, attrs[attr]);
        }
      }
      return node;
    };
    var end = function(type, url) {
      var s, q, qi, cbs, i, j, cur, val, flag;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        s[url] = true;
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (cur.urls.has(url)) {
            qi = cur, val = qi.urls.values();
            qi && (cbs = qi.callbacks);
            for (flag = true, j = 0; j < val.length; j++) {
              cur = val[j];
              if (!s[cur]) {
                flag = false;
              }
            }
            if (flag && cbs && cbs.length > 0) {
              for (j = 0; j < cbs.length; j++) {
                cbs[j].call(context);
              }
              qi.load = true;
            }
          }
        }
      }
    };
    var load = function(type, urls, callback) {
      var s, q, qi, node, i, cur,
        _urls = typeof urls === 'string' ? new Set([urls]) : new Set(urls), val, url;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (_urls.is(cur.urls)) {
            qi = cur;
            break;
          }
        }
        val = _urls.values();
        if (qi) {
          callback && (qi.load || qi.callbacks.push(callback));
          callback && (qi.load && callback());
        } else {
          q.push({
            urls: _urls,
            callbacks: callback ? [callback] : [],
            load: false
          });
          for (i = 0; i < val.length; i++) {
            node = null, url = val[i];
            if (s[url] === undefined) {
              (type === 'js' ) && (node = createNode('script', { src: url }));
              (type === 'css') && (node = createNode('link', { rel: 'stylesheet', href: url }));
              if (node) {
                node.onload = (function(type, url) {
                  return function() {
                    end(type, url);
                  };
                })(type, url);
                (doc.head || doc.body).appendChild(node);
                s[url] = false;
              }
            }
          }
        }
      }
    };
    return {
      js: function(url, callback) {
        load('js', url, callback);
      },
      css: function(url, callback) {
        load('css', url, callback);
      }
    };
  })(this.document);
})();
</script><script>
  (function() {
    var TEXT_VARIABLES = {
      version: '2.2.6',
      sources: {
        font_awesome: 'https://cdn.bootcdn.net/ajax/libs/font-awesome/5.15.1/css/all.css',
        jquery: 'https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js',
        leancloud_js_sdk: '//cdn.jsdelivr.net/npm/leancloud-storage@3.13.2/dist/av-min.js',
        chart: 'https://cdn.bootcss.com/Chart.js/2.7.2/Chart.bundle.min.js',
        gitalk: {
          js: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.js',
          css: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.css'
        },
        valine: 'https://unpkg.com/valine/dist/Valine.min.js',
        mathjax: 'https://cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML',
        mermaid: 'https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js'
      },
      site: {
        toc: {
          selectors: 'h1,h2,h3'
        }
      },
      paths: {
        search_js: '/assets/search.js'
      }
    };
    window.TEXT_VARIABLES = TEXT_VARIABLES;
  })();
</script>
</head>
  <body>
    <div class="root" data-is-touch="false">
      <div class="layout--page js-page-root"><div class="page__main js-page-main page__viewport has-aside cell cell--auto">

      <div class="page__main-inner"><div class="page__header d-print-none"><header class="header"><div class="main">
      <div class="header__title">
        <div class="header__brand"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="24px" height="24px" viewBox="0 0 24 24">
<style type="text/css">
	.st0{fill:#515151;}
</style>
<path class="st0" d="M1.7,22.3c5.7-5.7,11.3-5.7,17,0c3.3-3.3,3.5-5.3,0.8-6c2.7,0.7,3.5-1.1,2.3-5.6s-3.3-5.2-6.3-2.1
	c3-3,2.3-5.2-2.1-6.3S7,1.8,7.7,4.6C7,1.8,5,2.1,1.7,5.3C7.3,11,7.3,16.7,1.7,22.3"/>
</svg>

          <a title="Data Science Enthusiast
" href="/">Jingwen Zheng</a>
        </div><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></div><nav class="navigation">
        <ul><li class="navigation__item"><a href="/portfolio">Portfolio</a></li><li class="navigation__item"><a href="/archive">Archive</a></li><li class="navigation__item"><a href="/about">About</a></li><li><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></li></ul>
      </nav></div>
  </header>
</div><div class="page__content"><div class="article__header--overlay"><div class="hero hero--dark overlay" style="background-image:linear-gradient(135deg, rgba(0, 0, 0, .6), rgba(0, 0, 0, .4)),url(/images/20161118-notebook.jpg);background-color:#203028;"><div class="hero__content"><div class ="main"><div class="article__info clearfix">
      <ul class="left-col menu">
        <li>
              <a class="button button--secondary button--pill button--sm"
                href="/archive?tag=analysis">analysis</a>
            </li>

      <li class="separator">|</li>
        
          <li>
            <a class="button button--circle button--primary focus lang"
               href="/users-clustering/"><span>EN</span></a>

            






            

            
          </li>
        
      
    </ul><ul class="right-col menu"><li><i class="far fa-calendar-alt"></i> <span>Nov 18, 2016</span>
            </li></ul></div><div class="article__header"><header><h1>Analysis of internauts' behavior</h1></header></div><p class="overlay__excerpt">Since the internship will be finished in a few days, I’m seeking employment andreceived several invitations of interview, one of these company is FABERNOVELDATA &amp; MEDIA. After the first telepho...</p></div></div>
              </div>
            </div><div class ="main"><div class="grid grid--reverse">

              <div class="col-aside d-print-none js-col-aside"><aside class="page__aside js-page-aside"><div class="toc-aside js-toc-root"></div>
</aside></div>

              <div class="col-main cell cell--auto"><!-- start custom main top snippet -->

<!-- end custom main top snippet -->
<article itemscope itemtype="http://schema.org/Article"><meta itemprop="headline" content="Analysis of internauts' behavior"><meta itemprop="author" content="Jingwen Zheng"/><meta itemprop="datePublished" content="2016-11-18T22:32:43+01:00">
    <meta itemprop="keywords" content="analysis"><div class="js-article-content"><div class="layout--article"><!-- start custom article top snippet -->

<!-- end custom article top snippet -->
<div class="article__content" itemprop="articleBody"><p>Since the internship will be finished in a few days, I’m seeking employment and
received several invitations of interview, one of these company is <a href="http://data-media.fabernovel.fr">FABERNOVEL
DATA &amp; MEDIA</a>. After the first telephone interview,
there was a data-analysis test, which is really interesting. Thus, I would like
to share with you.</p>

<h2 id="data">Data</h2>

<p>There are 288,425 observations and 12 variables in the dataset, which are
extracted from the the web FABERNOVEL and describe various information of web
accessing. The following table gives a description of all variables.</p>

<table>
  <thead>
    <tr>
      <th><strong>Variables</strong></th>
      <th><strong>Description</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">date</code></td>
      <td>The date of contact between user and FABERNOVEL</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">hour</code></td>
      <td>The hour of contact between user and FABERNOVEL website</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">userID</code></td>
      <td>A unique identifier represents a user (may be misinformed)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">medium</code></td>
      <td>A categorization already carried out of the source of traffic that led the user to the site</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">deviceCategory</code></td>
      <td>The contact takes place via a desktop computer, a mobile phone or a tablet</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">regionId</code></td>
      <td>A code indicates the region where user is located during the contact</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">sessions</code></td>
      <td>The numbre of contacts made</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">goalsCompletions</code></td>
      <td>The number of actions considered as a goal on the site realized by the internauts</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">pageviews</code></td>
      <td>The number of page views on the site</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">timeOnPage</code></td>
      <td>The time spent on the site (the sum of the time spent on each page during a contact)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">transactions</code></td>
      <td>The number of purchases on the site made by the user</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">transactionRevenue</code></td>
      <td>The turnover realized by the surfer</td>
    </tr>
  </tbody>
</table>

<h2 id="data-preprocessing">Data preprocessing</h2>

<p>Moreover, we need to preprocess data before analysing.</p>

<ul>
  <li>Check missing values</li>
</ul>

<p>According to <code class="language-plaintext highlighter-rouge">View()</code>, we can find that among the column “medium” and “regionId”,
there are missing values expressed as “(none)” or “(not set)”. In order to
remove them, “(none)” and “(not set)” are replaced by <code class="language-plaintext highlighter-rouge">NA</code>; then, counting the
amount of missing values with <code class="language-plaintext highlighter-rouge">sum(is.na())</code>, in this case, there are 24,791
missing values in the dataset; finally, all missing values are removed.</p>

<ul>
  <li>Check outliers</li>
</ul>

<p>Thanks to the <a href="https://www.r-bloggers.com/identify-describe-plot-and-remove-the-outliers-from-the-dataset">blog</a> on site web <a href="https://www.r-bloggers.com">R-bloggers</a>, which used the
<a href="https://en.wikipedia.org/wiki/Outlier#Tukey.27s_test">Tukey’s method</a> to identify the outliers ranged below and above the
<code class="language-plaintext highlighter-rouge">1.5*IQR</code>(interquartile). In the blog, the author also shares the following R
script that can produce boxplots and histograms with and without outliers, the
proportion of outliers as well.</p>

<p>Here, I will show the result of variable <em>pageviews’</em> <code class="language-plaintext highlighter-rouge">outlierCheck</code> as an
example.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">outlierCheck</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span><span class="w"> </span><span class="n">pageviews</span><span class="p">)</span><span class="w">
</span><span class="n">Outliers</span><span class="w"> </span><span class="n">identified</span><span class="o">:</span><span class="w"> </span><span class="m">40767</span><span class="w">
</span><span class="n">Proportion</span><span class="w"> </span><span class="p">(</span><span class="o">%</span><span class="p">)</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">outliers</span><span class="o">:</span><span class="w"> </span><span class="m">18.3</span><span class="w">
</span><span class="n">Mean</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">outliers</span><span class="o">:</span><span class="w"> </span><span class="m">22.49</span><span class="w">
</span><span class="n">Mean</span><span class="w"> </span><span class="n">without</span><span class="w"> </span><span class="n">removing</span><span class="w"> </span><span class="n">outliers</span><span class="o">:</span><span class="w"> </span><span class="m">5.19</span><span class="w">
</span><span class="n">Mean</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">we</span><span class="w"> </span><span class="n">removing</span><span class="w"> </span><span class="n">outliers</span><span class="o">:</span><span class="w"> </span><span class="m">2.03</span></code></pre></figure>

<p align="center">
  <img alt="Outliers Pageviews" src="/images/20161118-outlierPageviews.png" />
</p>

<h2 id="data-visualization">Data visualization</h2>

<p>Another thing should not be forgotten before analysing is data visualisation.
According to the following graphs, we could see information clearly and
efficiently.</p>

<p><img alt="Data Visualisation Time on page-Count" src="/images/20161118-dataviz1.png" /></p>

<p>By the histogram above, we can observe that the sum of time spent on one page is
mostly shorter than 1000 units; and among 3 device categories, desktops are most
used, while the users of tablet are the least.</p>

<p><img alt="Data Visualisation Hour-page views" src="/images/20161118-dataviz2.png" /></p>

<p>Now, let’s look at this graph, it shows the amount of page views varies with hour.
At 7h, the amount of page views increases sharply, that might because people
wake up and surf on the net for make themselves to be awake; then it becomes
more gradual during the day, and reaches the peak at 21h, this reflects that
internauts prefer to surf the internet after dinner; after 21h, the amount of page
views decrease until tomorrow morning, as we expect, people go to sleep at night.</p>

<p><img alt="Data Visualisation Date-Page views" src="/images/20161118-dataviz3.png" /></p>

<p>These two graphs describe <em>Page views</em>’ tendency in terms of <em>Date</em>, with
respect to different devices. The first graph shows the overlapped page views
of 3 devices, which does a favour for comparing directly the page views among
all devices; so we can observe that page views’ amount from desktops is the
most among three devices, and during the period Sep. 19th - Oct. 19th, webpages
are more viewed from 6th October and reach the peak on 7th October, then page
views decrease slowly until 18th October and increase suddenly on 19th October.
The three graphs which are below the previous one display the tendency of each
device separately. Obviously, the results are similar as the first graph, but
they contribute to the analysis of <em>Date-Page views</em> relation for each device.</p>

<h2 id="principal-components-analysis">Principal Components Analysis</h2>

<p>In order to summarize the dataset while trying at the same time to keep the
maximal information contained among the variables. I firstly used the Principal
Components Analysis (PCA) technique.</p>

<table style="margin:auto; text-align:center">
  <tr>
    <th>
      <b>Component</b>
    </th>
    <th>
      <b>Sd</b>
    </th>
    <th>
      <b>Cumulative</b>
    </th>
  </tr>
  <tr>
    <td>Comp.1</td>
    <td>1.75685</td>
    <td>0.44093</td>
  </tr>
  <tr>
    <td>Comp.2</td>
    <td>1.09184</td>
    <td>0.61123</td>
  </tr>
  <tr>
    <td>Comp.3</td>
    <td>1.00515</td>
    <td>0.75556</td>
  </tr>
  <tr>
    <td>Comp.4</td>
    <td>0.98331</td>
    <td>
      <b>0.89370</b>
    </td>
  </tr>
  <tr>
    <td>Comp.5</td>
    <td>0.614753</td>
    <td>0.947681</td>
  </tr>
  <tr>
    <td>Comp.6</td>
    <td>0.492406</td>
    <td>0.982318</td>
  </tr>
  <tr>
    <td>Comp.7</td>
    <td>0.351811</td>
    <td>1.000000</td>
  </tr>
</table>

<p>According to the table above, notice that the explained variance labelled
<em>cumulative</em> reaches <strong>80%</strong> and increases very little as we add more principal
components, so we keep 4 principal components.</p>

<p align="center">
  <img alt="PCA plot" src="/images/20161118-PCA-plot.png" />
</p>

<p>From this graph, we could also get the number of principal components that will
be interpreted. The shape of the curve changes after the 4th component. Thus,
the same conclusion, we will keep 4 principal components.</p>

<p>By the following, I’ll take the first and the second principal component as an
example to interpret the result of PCA.</p>

<p align="center">
  <img alt="PCA variables factors map" src="/images/20161118-variables-factors-map.png" />
</p>

<p>From this scatterplot, we got the</p>

<ul>
  <li>
    <p><strong>Component 1</strong> is correlated positively with <em>timeOnPage, pageviews,
goalsCompletions, transactons</em> and <em>transactionRevenue</em>. We also observed that
the proportion of explained variance of the first component is <em>44.09%</em>.
Component measures the elements which are most relative to transaction.</p>
  </li>
  <li>
    <p><strong>Component 2</strong> is correlated positively with <em>sessions, hours, timeOnPage,
pageviews</em> and <em>goalsCompletions</em>. The proportion of explained variance of the
second component is <em>17.03%</em>. The second component measures the users’
performance of site visiting.</p>
  </li>
</ul>

<h2 id="clustering-k-means">Clustering (k-means)</h2>

<p>The second method that I used is Clustering(CL). This technique will enable us
to check different groups of observations. Members in each group are similar and
close to each other.</p>

<p>In order to apply Clustering <code class="language-plaintext highlighter-rouge">k-means</code> method, we can use the function <code class="language-plaintext highlighter-rouge">kmeans()</code>.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">userKMeans</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">kmeans</span><span class="p">(</span><span class="n">dataCL</span><span class="p">,</span><span class="w"> </span><span class="n">centers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">)</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">userKMeans</span><span class="w">
</span><span class="n">K</span><span class="o">-</span><span class="n">means</span><span class="w"> </span><span class="n">clustering</span><span class="w"> </span><span class="n">with</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="n">clusters</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">sizes</span><span class="w"> </span><span class="m">3589</span><span class="p">,</span><span class="w"> </span><span class="m">31603</span><span class="p">,</span><span class="w"> </span><span class="m">12588</span><span class="p">,</span><span class="w">
</span><span class="m">216232</span><span class="w">

</span><span class="n">Within</span><span class="w"> </span><span class="n">cluster</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">squares</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="n">cluster</span><span class="o">:</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1240837547</span><span class="w"> </span><span class="m">1150301678</span><span class="w"> </span><span class="m">1142761041</span><span class="w">  </span><span class="m">953329798</span><span class="w">
 </span><span class="p">(</span><span class="n">between_SS</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">total_SS</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="m">91.7</span><span class="w"> </span><span class="o">%</span><span class="p">)</span><span class="w">

</span><span class="n">Available</span><span class="w"> </span><span class="n">components</span><span class="o">:</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"cluster"</span><span class="w">         </span><span class="s2">"centers"</span><span class="w">     </span><span class="s2">"totss"</span><span class="w">      </span><span class="s2">"withinss"</span><span class="w">
</span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="s2">"tot.withinss"</span><span class="w">    </span><span class="s2">"betweenss"</span><span class="w">   </span><span class="s2">"size"</span><span class="w">        </span><span class="s2">"iter"</span><span class="w">
</span><span class="p">[</span><span class="m">9</span><span class="p">]</span><span class="w"> </span><span class="s2">"ifault"</span><span class="w">      </span></code></pre></figure>

<p>The following graph describes <em>Time on Page</em>’s tendency in terms of <em>Page Views</em>,
with respect to different clusters. In this graph, four clusters are presented
clearly: the internauts in cluster 1 spend more than 2000 units of time on the
webpage; the internauts who spend more than 250 time units but less than 1000
time units are in the second cluster; while in the third cluster, the time that
people spend on the webpage is between 1000 and 2000 time units; finally, for
the people who are in cluster 4, browsing webpage only takes less than 250 time
units. In this case, we can make different strategies of internet advertising
for different clusters.</p>

<p><img alt="CL-Page Views-Time on Page" src="/images/20161118-CL-pageviews-timeonpage.png" /></p>

<p>Here is what I want to share with you, really enjoyable, right?</p>

<p>If you are interested in the R script, please check it on my <a href="https://github.com/jingwen-z/R/blob/master/algorithm/user_clustering.R">Github</a>,
all propositions are welcome!</p>

<h2 id="reference">Reference</h2>
<ul>
  <li>freephotocc, “notebook laptop macbook conceptual”, <em>pixabay.com</em>. [Online]. Available: <a href="https://pixabay.com/photos/notebook-laptop-macbook-conceptual-1280538/">https://pixabay.com/photos/notebook-laptop-macbook-conceptual-1280538/</a></li>
</ul>

</div><section class="article__sharing d-print-none"></section><div class="d-print-none"><footer class="article__footer"><meta itemprop="dateModified" content="2016-11-18T22:32:43+01:00"><!-- start custom article footer snippet -->

<!-- end custom article footer snippet -->
<div class="article__subscribe"><div class="subscribe"><i class="fas fa-rss"></i> <a type="application/rss+xml" href="/feed.xml">Subscribe</a></div></div><div class="article__license"><div class="license">
    <p>This work is licensed under a <a itemprop="license" rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/">Attribution-NonCommercial 4.0 International</a> license.
      <a rel="license" href="https://creativecommons.org/licenses/by-nc/4.0/">
        <img alt="Attribution-NonCommercial 4.0 International" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" />
      </a>
    </p>
  </div></div></footer>
<div class="article__section-navigator clearfix"><div class="previous"><span>PREVIOUS</span><a href="/analyse-total-amount-of-compensation/">Impact of different elements on compensation</a></div><div class="next"><span>NEXT</span><a href="/introduction-bd-week1-2/">UCSD Introduction to Big Data Week 1 & 2 review</a></div></div></div>

</div>

<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    $(function() {
      var $this ,$scroll;
      var $articleContent = $('.js-article-content');
      var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');
      var scroll = hasSidebar ? '.js-page-main' : 'html, body';
      $scroll = $(scroll);

      $articleContent.find('.highlight').each(function() {
        $this = $(this);
        $this.attr('data-lang', $this.find('code').attr('data-lang'));
      });
      $articleContent.find('h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]').each(function() {
        $this = $(this);
        $this.append($('<a class="anchor d-print-none" aria-hidden="true"></a>').html('<i class="fas fa-anchor"></i>'));
      });
      $articleContent.on('click', '.anchor', function() {
        $scroll.scrollToAnchor('#' + $(this).parent().attr('id'), 400);
      });
    });
  });
})();
</script>
</div><section class="page__comments d-print-none"><div id="disqus_thread"></div>
  <script>
  /**
  *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
  *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
  var disqus_config = function () {
    this.page.url = 'https://jingwen-z.github.io//users-clustering/';
    this.page.identifier = '/users-clustering';
  };
  (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://jingwen-z.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></section></article><!-- start custom main bottom snippet -->

<!-- end custom main bottom snippet -->
</div>
            </div></div></div><div class="page__footer d-print-none">
<footer class="footer py-4 js-page-footer">
  <div class="main"><div itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jingwen Zheng"><meta itemprop="url" content="/"><meta itemprop="description" content="Data Science Enthusiast"><div class="footer__author-links"><div class="author-links">
  <ul class="menu menu--nowrap menu--inline"><li title="Follow me on Linkedin.">
        <a class="button button--circle linkedin-button" itemprop="sameAs" href="https://www.linkedin.com/in/jingwen-zheng" target="_blank">
          <div class="icon"><svg fill="#000000" width="24px" height="24px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M260.096 155.648c0 27.307008-9.899008 50.516992-29.696 69.632-19.796992 19.115008-45.396992 28.672-76.8 28.672-30.036992 0-54.612992-9.556992-73.728-28.672-19.115008-19.115008-28.672-42.324992-28.672-69.632 0-28.672 9.556992-52.224 28.672-70.656 19.115008-18.432 44.372992-27.648 75.776-27.648 31.403008 0 56.32 9.216 74.752 27.648 18.432 18.432 28.331008 41.984 29.696 70.656 0 0 0 0 0 0m-202.752 808.96c0 0 0-632.832 0-632.832 0 0 196.608 0 196.608 0 0 0 0 632.832 0 632.832 0 0-196.608 0-196.608 0 0 0 0 0 0 0m313.344-430.08c0-58.708992-1.364992-126.292992-4.096-202.752 0 0 169.984 0 169.984 0 0 0 10.24 88.064 10.24 88.064 0 0 4.096 0 4.096 0 40.96-68.267008 105.812992-102.4 194.56-102.4 68.267008 0 123.220992 22.868992 164.864 68.608 41.643008 45.739008 62.464 113.664 62.464 203.776 0 0 0 374.784 0 374.784 0 0-196.608 0-196.608 0 0 0 0-350.208 0-350.208 0-91.476992-33.451008-137.216-100.352-137.216-47.787008 0-81.236992 24.576-100.352 73.728-4.096 8.192-6.144 24.576-6.144 49.152 0 0 0 364.544 0 364.544 0 0-198.656 0-198.656 0 0 0 0-430.08 0-430.08 0 0 0 0 0 0" />
</svg>
</div>
        </a>
      </li><li title="Follow me on Github.">
        <a class="button button--circle github-button" itemprop="sameAs" href="https://github.com/jingwen-z" target="_blank">
          <div class="icon"><svg fill="#000000" width="24px" height="24px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path class="svgpath" data-index="path_0" fill="#272636" d="M0 525.2c0 223.6 143.3 413.7 343 483.5 26.9 6.8 22.8-12.4 22.8-25.4l0-88.7c-155.3 18.2-161.5-84.6-172-101.7-21.1-36-70.8-45.2-56-62.3 35.4-18.2 71.4 4.6 113.1 66.3 30.2 44.7 89.1 37.2 119 29.7 6.5-26.9 20.5-50.9 39.7-69.6C248.8 728.2 181.7 630 181.7 513.2c0-56.6 18.7-108.7 55.3-150.7-23.3-69.3 2.2-128.5 5.6-137.3 66.5-6 135.5 47.6 140.9 51.8 37.8-10.2 80.9-15.6 129.1-15.6 48.5 0 91.8 5.6 129.8 15.9 12.9-9.8 77-55.8 138.8-50.2 3.3 8.8 28.2 66.7 6.3 135 37.1 42.1 56 94.6 56 151.4 0 117-67.5 215.3-228.8 243.7 26.9 26.6 43.6 63.4 43.6 104.2l0 128.8c0.9 10.3 0 20.5 17.2 20.5C878.1 942.4 1024 750.9 1024 525.3c0-282.9-229.3-512-512-512C229.1 13.2 0 242.3 0 525.2L0 525.2z" />
</svg>
</div>
        </a>
      </li></ul>
</div>
</div>
    </div><div class="site-info mt-2">
      <div>© Jingwen Zheng 2021,
        Powered by <a title="Jekyll is a simple, blog-aware, static site generator." href="http://jekyllrb.com/">Jekyll</a> & <a
        title="TeXt is a super customizable Jekyll theme." href="https://github.com/kitian616/jekyll-TeXt-theme">TeXt Theme</a>.
      </div>
    </div>
  </div>
</footer>
</div></div>
    </div><script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $body = $('body'), $window = $(window);
    var $pageRoot = $('.js-page-root'), $pageMain = $('.js-page-main');
    var activeCount = 0;
    function modal(options) {
      var $root = this, visible, onChange, hideWhenWindowScroll = false;
      var scrollTop;
      function setOptions(options) {
        var _options = options || {};
        visible = _options.initialVisible === undefined ? false : show;
        onChange = _options.onChange;
        hideWhenWindowScroll = _options.hideWhenWindowScroll;
      }
      function init() {
        setState(visible);
      }
      function setState(isShow) {
        if (isShow === visible) {
          return;
        }
        visible = isShow;
        if (visible) {
          activeCount++;
          scrollTop = $(window).scrollTop() || $pageMain.scrollTop();
          $root.addClass('modal--show');
          $pageMain.scrollTop(scrollTop);
          activeCount === 1 && ($pageRoot.addClass('show-modal'), $body.addClass('of-hidden'));
          hideWhenWindowScroll && window.hasEvent('touchstart') && $window.on('scroll', hide);
          $window.on('keyup', handleKeyup);
        } else {
          activeCount > 0 && activeCount--;
          $root.removeClass('modal--show');
          $window.scrollTop(scrollTop);
          activeCount === 0 && ($pageRoot.removeClass('show-modal'), $body.removeClass('of-hidden'));
          hideWhenWindowScroll && window.hasEvent('touchstart') && $window.off('scroll', hide);
          $window.off('keyup', handleKeyup);
        }
        onChange && onChange(visible);
      }
      function show() {
        setState(true);
      }
      function hide() {
        setState(false);
      }
      function handleKeyup(e) {
        // Char Code: 27  ESC
        if (e.which ===  27) {
          hide();
        }
      }
      setOptions(options);
      init();
      return {
        show: show,
        hide: hide,
        $el: $root
      };
    }
    $.fn.modal = modal;
  });
})();
</script><div class="modal modal--overflow page__search-modal d-print-none js-page-search-modal"><script>
(function () {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    // search panel
    var search = (window.search || (window.search = {}));
    var useDefaultSearchBox = window.useDefaultSearchBox === undefined ?
      true : window.useDefaultSearchBox ;

    var $searchModal = $('.js-page-search-modal');
    var $searchToggle = $('.js-search-toggle');
    var searchModal = $searchModal.modal({ onChange: handleModalChange, hideWhenWindowScroll: true });
    var modalVisible = false;
    search.searchModal = searchModal;

    var $searchBox = null;
    var $searchInput = null;
    var $searchClear = null;

    function getModalVisible() {
      return modalVisible;
    }
    search.getModalVisible = getModalVisible;

    function handleModalChange(visible) {
      modalVisible = visible;
      if (visible) {
        search.onShow && search.onShow();
        useDefaultSearchBox && $searchInput[0] && $searchInput[0].focus();
      } else {
        search.onShow && search.onHide();
        useDefaultSearchBox && $searchInput[0] && $searchInput[0].blur();
        setTimeout(function() {
          useDefaultSearchBox && ($searchInput.val(''), $searchBox.removeClass('not-empty'));
          search.clear && search.clear();
          window.pageAsideAffix && window.pageAsideAffix.refresh();
        }, 400);
      }
    }

    $searchToggle.on('click', function() {
      modalVisible ? searchModal.hide() : searchModal.show();
    });
    // Char Code: 83  S, 191 /
    $(window).on('keyup', function(e) {
      if (!modalVisible && !window.isFormElement(e.target || e.srcElement) && (e.which === 83 || e.which === 191)) {
        modalVisible || searchModal.show();
      }
    });

    if (useDefaultSearchBox) {
      $searchBox = $('.js-search-box');
      $searchInput = $searchBox.children('input');
      $searchClear = $searchBox.children('.js-icon-clear');
      search.getSearchInput = function() {
        return $searchInput.get(0);
      };
      search.getVal = function() {
        return $searchInput.val();
      };
      search.setVal = function(val) {
        $searchInput.val(val);
      };

      $searchInput.on('focus', function() {
        $(this).addClass('focus');
      });
      $searchInput.on('blur', function() {
        $(this).removeClass('focus');
      });
      $searchInput.on('input', window.throttle(function() {
        var val = $(this).val();
        if (val === '' || typeof val !== 'string') {
          search.clear && search.clear();
        } else {
          $searchBox.addClass('not-empty');
          search.onInputNotEmpty && search.onInputNotEmpty(val);
        }
      }, 400));
      $searchClear.on('click', function() {
        $searchInput.val(''); $searchBox.removeClass('not-empty');
        search.clear && search.clear();
      });
    }
  });
})();
</script><div class="search search--dark">
  <div class="main">
    <div class="search__header">Search</div>
    <div class="search-bar">
      <div class="search-box js-search-box">
        <div class="search-box__icon-search"><i class="fas fa-search"></i></div>
        <input type="text" />
        <div class="search-box__icon-clear js-icon-clear">
          <a><i class="fas fa-times"></i></a>
        </div>
      </div>
      <button class="button button--theme-dark button--pill search__cancel js-search-toggle">
        Cancel</button>
    </div>
    <div class="search-result js-search-result"></div>
  </div>
</div>
<script>var SOURCES = window.TEXT_VARIABLES.sources;
var PAHTS = window.TEXT_VARIABLES.paths;
window.Lazyload.js([SOURCES.jquery, PAHTS.search_js], function() {
  var search = (window.search || (window.search = {}));
  var searchData = window.TEXT_SEARCH_DATA || {};

  function memorize(f) {
    var cache = {};
    return function () {
      var key = Array.prototype.join.call(arguments, ',');
      if (key in cache) return cache[key];
      else return cache[key] = f.apply(this, arguments);
    };
  }

  /// search
  function searchByQuery(query) {
    var i, j, key, keys, cur, _title, result = {};
    keys = Object.keys(searchData);
    for (i = 0; i < keys.length; i++) {
      key = keys[i];
      for (j = 0; j < searchData[key].length; j++) {
        cur = searchData[key][j], _title = cur.title;
        if ((result[key] === undefined || result[key] && result[key].length < 4 )
          && _title.toLowerCase().indexOf(query.toLowerCase()) >= 0) {
          if (result[key] === undefined) {
            result[key] = [];
          }
          result[key].push(cur);
        }
      }
    }
    return result;
  }

  var renderHeader = memorize(function(header) {
    return $('<p class="search-result__header">' + header + '</p>');
  });

  var renderItem = function(index, title, url) {
    return $('<li class="search-result__item" data-index="' + index + '"><a class="button" href="' + url + '">' + title + '</a></li>');
  };

  function render(data) {
    if (!data) { return null; }
    var $root = $('<ul></ul>'), i, j, key, keys, cur, itemIndex = 0;
    keys = Object.keys(data);
    for (i = 0; i < keys.length; i++) {
      key = keys[i];
      $root.append(renderHeader(key));
      for (j = 0; j < data[key].length; j++) {
        cur = data[key][j];
        $root.append(renderItem(itemIndex++, cur.title, cur.url));
      }
    }
    return $root;
  }

  // search box
  var $result = $('.js-search-result'), $resultItems;
  var lastActiveIndex, activeIndex;

  function clear() {
    $result.html(null);
    $resultItems = $('.search-result__item'); activeIndex = 0;
  }
  function onInputNotEmpty(val) {
    $result.html(render(searchByQuery(val)));
    $resultItems = $('.search-result__item'); activeIndex = 0;
    $resultItems.eq(0).addClass('active');
  }

  search.clear = clear;
  search.onInputNotEmpty = onInputNotEmpty;

  function updateResultItems() {
    lastActiveIndex >= 0 && $resultItems.eq(lastActiveIndex).removeClass('active');
    activeIndex >= 0 && $resultItems.eq(activeIndex).addClass('active');
  }

  function moveActiveIndex(direction) {
    var itemsCount = $resultItems ? $resultItems.length : 0;
    if (itemsCount > 1) {
      lastActiveIndex = activeIndex;
      if (direction === 'up') {
        activeIndex = (activeIndex - 1 + itemsCount) % itemsCount;
      } else if (direction === 'down') {
        activeIndex = (activeIndex + 1 + itemsCount) % itemsCount;
      }
      updateResultItems();
    }
  }

  // Char Code: 13  Enter, 37  ⬅, 38  ⬆, 39  ➡, 40  ⬇
  $(window).on('keyup', function(e) {
    var modalVisible = search.getModalVisible && search.getModalVisible();
    if (modalVisible) {
      if (e.which === 38) {
        modalVisible && moveActiveIndex('up');
      } else if (e.which === 40) {
        modalVisible && moveActiveIndex('down');
      } else if (e.which === 13) {
        modalVisible && $resultItems && activeIndex >= 0 && $resultItems.eq(activeIndex).children('a')[0].click();
      }
    }
  });

  $result.on('mouseover', '.search-result__item > a', function() {
    var itemIndex = $(this).parent().data('index');
    itemIndex >= 0 && (lastActiveIndex = activeIndex, activeIndex = itemIndex, updateResultItems());
  });
});
</script>
</div></div>


<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function scrollToAnchor(anchor, duration, callback) {
      var $root = this;
      $root.animate({ scrollTop: $(anchor).position().top }, duration, function() {
        window.history.replaceState(null, '', window.location.href.split('#')[0] + anchor);
        callback && callback();
      });
    }
    $.fn.scrollToAnchor = scrollToAnchor;
  });
})();
(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function affix(options) {
      var $root = this, $window = $(window), $scrollTarget, $scroll,
        offsetBottom = 0, scrollTarget = window, scroll = window.document, disabled = false, isOverallScroller = true,
        rootTop, rootLeft, rootHeight, scrollBottom, rootBottomTop,
        hasInit = false, curState;

      function setOptions(options) {
        var _options = options || {};
        _options.offsetBottom && (offsetBottom = _options.offsetBottom);
        _options.scrollTarget && (scrollTarget = _options.scrollTarget);
        _options.scroll && (scroll = _options.scroll);
        _options.disabled !== undefined && (disabled = _options.disabled);
        $scrollTarget = $(scrollTarget);
        isOverallScroller = window.isOverallScroller($scrollTarget[0]);
        $scroll = $(scroll);
      }
      function preCalc() {
        top();
        rootHeight = $root.outerHeight();
        rootTop = $root.offset().top + (isOverallScroller ? 0 :  $scrollTarget.scrollTop());
        rootLeft = $root.offset().left;
      }
      function calc(needPreCalc) {
        needPreCalc && preCalc();
        scrollBottom = $scroll.outerHeight() - offsetBottom - rootHeight;
        rootBottomTop = scrollBottom - rootTop;
      }
      function top() {
        if (curState !== 'top') {
          $root.removeClass('fixed').css({
            left: 0,
            top: 0
          });
          curState = 'top';
        }
      }
      function fixed() {
        if (curState !== 'fixed') {
          $root.addClass('fixed').css({
            left: rootLeft + 'px',
            top: 0
          });
          curState = 'fixed';
        }
      }
      function bottom() {
        if (curState !== 'bottom') {
          $root.removeClass('fixed').css({
            left: 0,
            top: rootBottomTop + 'px'
          });
          curState = 'bottom';
        }
      }
      function setState() {
        var scrollTop = $scrollTarget.scrollTop();
        if (scrollTop >= rootTop && scrollTop <= scrollBottom) {
          fixed();
        } else if (scrollTop < rootTop) {
          top();
        } else {
          bottom();
        }
      }
      function init() {
        if(!hasInit) {
          var interval, timeout;
          calc(true); setState();
          // run calc every 100 millisecond
          interval = setInterval(function() {
            calc();
          }, 100);
          timeout = setTimeout(function() {
            clearInterval(interval);
          }, 45000);
          window.pageLoad.then(function() {
            setTimeout(function() {
              clearInterval(interval);
              clearTimeout(timeout);
            }, 3000);
          });
          $scrollTarget.on('scroll', function() {
            disabled || setState();
          });
          $window.on('resize', function() {
            disabled || (calc(true), setState());
          });
          hasInit = true;
        }
      }

      setOptions(options);
      if (!disabled) {
        init();
      }
      $window.on('resize', window.throttle(function() {
        init();
      }, 200));
      return {
        setOptions: setOptions,
        refresh: function() {
          calc(true, { animation: false }); setState();
        }
      };
    }
    $.fn.affix = affix;
  });
})();
(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function toc(options) {
      var $root = this, $window = $(window), $scrollTarget, $scroller, $tocUl = $('<ul class="toc toc--ellipsis"></ul>'), $tocLi, $headings, $activeLast, $activeCur,
        selectors = 'h1,h2,h3', container = 'body', scrollTarget = window, scroller = 'html, body', disabled = false,
        headingsPos, scrolling = false, hasRendered = false, hasInit = false;

      function setOptions(options) {
        var _options = options || {};
        _options.selectors && (selectors = _options.selectors);
        _options.container && (container = _options.container);
        _options.scrollTarget && (scrollTarget = _options.scrollTarget);
        _options.scroller && (scroller = _options.scroller);
        _options.disabled !== undefined && (disabled = _options.disabled);
        $headings = $(container).find(selectors).filter('[id]');
        $scrollTarget = $(scrollTarget);
        $scroller = $(scroller);
      }
      function calc() {
        headingsPos = [];
        $headings.each(function() {
          headingsPos.push(Math.floor($(this).position().top));
        });
      }
      function setState(element, disabled) {
        var scrollTop = $scrollTarget.scrollTop(), i;
        if (disabled || !headingsPos || headingsPos.length < 1) { return; }
        if (element) {
          $activeCur = element;
        } else {
          for (i = 0; i < headingsPos.length; i++) {
            if (scrollTop >= headingsPos[i]) {
              $activeCur = $tocLi.eq(i);
            } else {
              $activeCur || ($activeCur = $tocLi.eq(i));
              break;
            }
          }
        }
        $activeLast && $activeLast.removeClass('active');
        ($activeLast = $activeCur).addClass('active');
      }
      function render() {
        if(!hasRendered) {
          $root.append($tocUl);
          $headings.each(function() {
            var $this = $(this);
            $tocUl.append($('<li></li>').addClass('toc-' + $this.prop('tagName').toLowerCase())
              .append($('<a></a>').text($this.text()).attr('href', '#' + $this.prop('id'))));
          });
          $tocLi = $tocUl.children('li');
          $tocUl.on('click', 'a', function(e) {
            e.preventDefault();
            var $this = $(this);
            scrolling = true;
            setState($this.parent());
            $scroller.scrollToAnchor($this.attr('href'), 400, function() {
              scrolling = false;
            });
          });
        }
        hasRendered = true;
      }
      function init() {
        var interval, timeout;
        if(!hasInit) {
          render(); calc(); setState(null, scrolling);
          // run calc every 100 millisecond
          interval = setInterval(function() {
            calc();
          }, 100);
          timeout = setTimeout(function() {
            clearInterval(interval);
          }, 45000);
          window.pageLoad.then(function() {
            setTimeout(function() {
              clearInterval(interval);
              clearTimeout(timeout);
            }, 3000);
          });
          $scrollTarget.on('scroll', function() {
            disabled || setState(null, scrolling);
          });
          $window.on('resize', window.throttle(function() {
            if (!disabled) {
              render(); calc(); setState(null, scrolling);
            }
          }, 100));
        }
        hasInit = true;
      }

      setOptions(options);
      if (!disabled) {
        init();
      }
      $window.on('resize', window.throttle(function() {
        init();
      }, 200));
      return {
        setOptions: setOptions
      };
    }
    $.fn.toc = toc;
  });
})();
/*(function () {

})();*/
</script><script>
  /* toc must before affix, since affix need to konw toc' height. */(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  var TOC_SELECTOR = window.TEXT_VARIABLES.site.toc.selectors;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $window = $(window);
    var $articleContent = $('.js-article-content');
    var $tocRoot = $('.js-toc-root'), $col2 = $('.js-col-aside');
    var toc;
    var tocDisabled = false;
    var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');
    var hasToc = $articleContent.find(TOC_SELECTOR).length > 0;

    function disabled() {
      return $col2.css('display') === 'none' || !hasToc;
    }

    tocDisabled = disabled();

    toc = $tocRoot.toc({
      selectors: TOC_SELECTOR,
      container: $articleContent,
      scrollTarget: hasSidebar ? '.js-page-main' : null,
      scroller: hasSidebar ? '.js-page-main' : null,
      disabled: tocDisabled
    });

    $window.on('resize', window.throttle(function() {
      tocDisabled = disabled();
      toc && toc.setOptions({
        disabled: tocDisabled
      });
    }, 100));

  });
})();
(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $window = $(window), $pageFooter = $('.js-page-footer');
    var $pageAside = $('.js-page-aside');
    var affix;
    var tocDisabled = false;
    var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');

    affix = $pageAside.affix({
      offsetBottom: $pageFooter.outerHeight(),
      scrollTarget: hasSidebar ? '.js-page-main' : null,
      scroller: hasSidebar ? '.js-page-main' : null,
      scroll: hasSidebar ? $('.js-page-main').children() : null,
      disabled: tocDisabled
    });

    $window.on('resize', window.throttle(function() {
      affix && affix.setOptions({
        disabled: tocDisabled
      });
    }, 100));

    window.pageAsideAffix = affix;
  });
})();
</script>
    </div>
    <script>(function () {
  var $root = document.getElementsByClassName('root')[0];
  if (window.hasEvent('touchstart')) {
    $root.dataset.isTouch = true;
    document.addEventListener('touchstart', function(){}, false);
  }
})();
</script>
  </body>
</html>

